<BSkyCanvas internalhelpfilename="{x:Null}" Title="Expand Weights (Creates a new dataset with rows expanded as per weights)" ModelClasses="" StatusTextBoxName="" customsyntax="{x:Null}" EditableComboBoxName="{x:Null}" RPackages="splitstackshape" CanExecute="True" PrereqCommandString="" CommandString="# expanding the dataset according to the weights&#xA;BSkybool = BSkySetWeight( weights=&quot;{{destination}}&quot;, data=&quot;{{%DATASET%}}&quot;, newdata=&quot;{{datasetname}}&quot;)&#xA;# Loading the dataset in the grid if the operation above is successful&#xA;BSkyLoadRefreshDataframe(dframe={{datasetname}},load.dataframe=BSkybool )&#xA;# removing the BSkybool object&#xA;rm(BSkybool)&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;" dlgsyntax="# expanding the dataset according to the weights&#xA;BSkybool = BSkySetWeight( weights=&quot;{{destination}}&quot;, data=&quot;{{%DATASET%}}&quot;, newdata=&quot;{{datasetname}}&quot;)&#xA;# Loading the dataset in the grid if the operation above is successful&#xA;BSkyLoadRefreshDataframe(dframe={{datasetname}},load.dataframe=BSkybool )&#xA;# removing the BSkybool object&#xA;rm(BSkybool)&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;" Helpfile="{x:Null}" splitProcessing="False" MenuLocation="{x:Null}" OutputDefinition="{x:Null}" Width="565" Command="False" Height="400" HelpText="&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;.c0 { color: Black } .c1 { margin: 0px 0px 10px } .c2 { background-color: White; color: #666666; font-family: 'Courier New'; font-size: 18.06px; font-style: normal; font-weight: bold; text-align: center; text-decoration: none; text-indent: 0px } .c3 { background-color: Transparent; font-family: 'Arial'; font-size: 14.6666666666667px; color: Black; text-decoration: none } .c4 { font-weight: bold; font-size: 14.6666660308838px; line-height: 1.14999997615814; font-family: 'Arial' } .c5 { margin: 0px 0px 13px; line-height: 1.14999997615814; font-size: 11px; font-family: 'Arial' } .c6 { background-color: Transparent; color: Black; font-size: 14.6666666666667px; font-style: normal; font-weight: normal; text-align: left; text-decoration: none; text-indent: 0px } .c7 { font-weight: bold; font-size: 14.6666660308838px } .c8 { margin: 0px 0px 10px; line-height: 1.14999997615814; font-size: 11px; font-family: 'Arial' } .c9 { font-weight: normal; font-size: 14.6666666666667px } .c10 { font-size: 11px; font-family: 'Arial' } .c11 { font-size: 14.6666666666667px } .c12 { margin: 0px 0px 10px; font-size: 11px; font-family: 'Arial' } .c13 { font-weight: bold; font-size: 14.6666666666667px } .c14 { font-weight: bold; font-size: 14.6666660308838px; font-family: 'Arial' } .c15 { font-weight: normal; font-size: 14.6666660308838px; font-family: 'Arial' } .c16 { line-height: 1.14999997615814; font-size: 11px; font-family: 'Arial' } .c17 { background-color: Transparent; color: Black; font-family: 'Times New Roman'; font-size: 16px; font-style: normal; font-weight: normal; text-align: left; text-decoration: none; text-indent: 0px } &lt;/style&gt;&lt;/head&gt;&lt;body class=&quot;c0&quot;&gt;&lt;p class=&quot;c1&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c2&quot;&gt;Expand the Rows of a Dataset&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c1&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;c3&quot;&gt;BSkySetWeight(weights, data, newdata)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c1&quot;&gt;&lt;span&gt;&lt;span class=&quot;c4&quot;&gt;Description:&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c5&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;Expands (replicates) the rows of a&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;data.frame&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;&amp;#160;&amp;#160;by&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;&amp;#160;a value contained in one of the columns in the source&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;data.frame&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;&amp;#160;or&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;data.table&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;. BSkySetWeights() calls expandRows() from the package splitstackshape.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c5&quot;&gt;&lt;span&gt;&lt;span class=&quot;c7&quot;&gt;Usage:&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c8&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&amp;#x200b;&lt;span&gt;&lt;span class=&quot;c3&quot;&gt;BSkySetWeight(weights, data, newdata)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c5&quot;&gt;&lt;span&gt;&lt;span class=&quot;c7&quot;&gt;Arguments:&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c5&quot;&gt;&lt;span&gt;&lt;span class=&quot;c9&quot;&gt;weights: The dataset variable that contains the weights.&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c8&quot;&gt;&lt;span class=&quot;c10&quot;&gt;&lt;span&gt;&lt;span class=&quot;c9&quot;&gt;data:&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;The input&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;data.frame&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;&amp;#160;or&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;data.table&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c8&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;c11&quot;&gt;newdata&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c9&quot;&gt;&amp;#160;&lt;/span&gt;&lt;span class=&quot;c9&quot;&gt;: &amp;#160;The new dataset where the rows are replicated for the weights specified.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c7&quot;&gt;Package:&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;splitstackshape&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;c14&quot;&gt;Help:&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;help (expandRows)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c12&quot;&gt;&lt;span class=&quot;c16&quot;&gt;&lt;span class=&quot;c17&quot;&gt;&amp;#x200b;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;" RHelpText="help(expandRows, package=splitstackshape)" Background="#FFEEEFFF" xmlns="clr-namespace:BSky.Controls;assembly=BSky.Controls" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"><BSkySourceList CanExecute="True" Syntax="%%VALUE%%" summaryCtrl="False" PrefixTxt="{x:Null}" SepCharacter="{x:Null}" maxNoOfVariables="" SubstituteSettings="NoPrefix|UseComma" ordlevels="{x:Null}" nomlevels="{x:Null}" Name="source" AutoVar="False" renderVars="False" Filter="String|Numeric|Date|Logical|Ordinal|Nominal|Scale" Width="260" Height="320" Left="5" Top="75" Enabled="True" OverwriteSettings="{x:Null}" MoveVariables="True" SelectionMode="Extended"  AllowDrop="True" IsEnabled="True" Focusable="True" av:Canvas.Left="5" av:Canvas.Top="75" av:Grid.IsSharedSizeScope="True"><BSkySourceList.SelectionChangeBehaviour><BehaviourCollection Capacity="0" /></BSkySourceList.SelectionChangeBehaviour><BSkySourceList.Template><av:ControlTemplate TargetType="av:ListBox"><av:Border BorderThickness="1,1,1,1" CornerRadius="4,4,4,4" BorderBrush="#FF888888" Background="#FFFFFFFF"><av:ScrollViewer Margin="1,1,1,1" Focusable="False"><av:StackPanel IsItemsHost="True" Margin="0,0,0,0" /></av:ScrollViewer></av:Border></av:ControlTemplate></BSkySourceList.Template><BSkySourceList.Style><av:Style TargetType="av:ListBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkySourceList.Style></BSkySourceList><BSkyTargetList CanExecute="True" Syntax="%%VALUE%%" summaryCtrl="False" PrefixTxt="{x:Null}" SepCharacter="{x:Null}" maxNoOfVariables="" SubstituteSettings="NoPrefix|UseComma" ordlevels="" nomlevels="" Name="destination" AutoVar="True" renderVars="False" Filter="String|Numeric|Date|Logical|Ordinal|Nominal|Scale" Width="260" Height="30" Left="301" Top="75" Enabled="True" OverwriteSettings="{x:Null}" MoveVariables="True" SelectionMode="Extended"  AllowDrop="True" IsEnabled="True" Focusable="True" av:Canvas.Left="301" av:Canvas.Top="75" av:Grid.IsSharedSizeScope="True"><BSkyTargetList.SelectionChangeBehaviour><BehaviourCollection Capacity="0" /></BSkyTargetList.SelectionChangeBehaviour><BSkyTargetList.Template><av:ControlTemplate TargetType="av:ListBox"><av:Border BorderThickness="1,1,1,1" CornerRadius="4,4,4,4" BorderBrush="#FF888888" Background="#FFFFFFFF"><av:ScrollViewer Margin="1,1,1,1" Focusable="False"><av:StackPanel IsItemsHost="True" Margin="0,0,0,0" /></av:ScrollViewer></av:Border></av:ControlTemplate></BSkyTargetList.Template><BSkyTargetList.Style><av:Style TargetType="av:ListBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTargetList.Style></BSkyTargetList><BSkyLabel Name="lbl3" Text="Enter column that contains the weights" Width="231" Height="25" Left="296" Top="50" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="296" av:Canvas.Top="50">Enter column that contains the weights</BSkyLabel><BSkyLabel Name="lab1" Text="Source Variables" Width="114" Height="24" Left="1" Top="50" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="1" av:Canvas.Top="50">Source Variables</BSkyLabel><BSkyVariableMoveButton Name="move" InputList="source" TargetList="destination" Width="30" Height="30" Left="266" Top="75" Padding="1,1,1,1" Tag="To Dest" Margin="2,2,2,2" av:Canvas.Left="266" av:Canvas.Top="75"><BSkyVariableMoveButton.Effect><av:DropShadowEffect ShadowDepth="0" Color="#C89B5F00" Direction="320" Opacity="1" /></BSkyVariableMoveButton.Effect><av:Grid><av:Image Source="pack://application:,,,/BSky.Controls;component/Resources/left.png" /></av:Grid></BSkyVariableMoveButton><BSkyLabel Name="labn" Text="Name of the dataset with weights expanded" Width="248" Height="27" Left="0" Top="10" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="0" av:Canvas.Top="10">Name of the dataset with weights expanded</BSkyLabel><BSkyTextBox PrefixTxt="{x:Null}" OverWriteExistingVariables="False" OverwriteSettings="PromptBeforeOverwritingDatasets" Name="datasetname" Width="95" Height="30" Left="255" Top="11" SubstituteSettings="TextAsIs" CanExecute="False" Enabled="True" Syntax="%%VALUE%%" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Center" Template="{av:DynamicResource TextBoxBaseControlTemplate}" AllowDrop="True" IsEnabled="True" av:Canvas.Left="255" av:Canvas.Top="11" xml:space="preserve"><BSkyTextBox.TextChangedBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{x:Null}" Operator="isNullOrEmpty" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="datasetname" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{x:Null}" Operator="ValidString" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="datasetname" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{x:Null}" Operator="IsNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="datasetname" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTextBox.TextChangedBehaviour><BSkyTextBox.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTextBox.Style></BSkyTextBox><BSkyLabelReqdField Name="rq1" Text="*" Width="15" Height="25" Left="237" Top="7" CanExecute="False" Foreground="#FFFF0000" FontFamily="Segoe UI" FontSize="12" FontWeight="Bold" av:Canvas.Left="237" av:Canvas.Top="7">*</BSkyLabelReqdField></BSkyCanvas>