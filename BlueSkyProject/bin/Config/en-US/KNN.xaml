<BSkyCanvas internalhelpfilename="{assembly:Null}" Title="K Nearest Neighbors" ModelClasses="{assembly:Null}" StatusTextBoxName="{assembly:Null}" RPackages="caret;class" CanExecute="True" PrereqCommandString="{assembly:Null}" CommandString="local(&#xA;{&#xA;noneighbors = c('{{noneighbors}}')&#xA;if (noneighbors=='')&#xA;{&#xA;noneighbors =sqrt(nrow({{%DATASET%}}))&#xA;}&#xA;else&#xA;{&#xA;noneighbors =as.numeric(noneighbors )&#xA;}&#xA;percentage = {{splitPercentage}}/100&#xA;set.seed({{Seed}})&#xA;trainIndex &lt;- createDataPartition({{$dependentvar}},p=percentage,list=FALSE)&#xA;.GlobalEnv${{trainDatasetName}} &lt;- {{%DATASET%}} [ trainIndex,]&#xA;.GlobalEnv${{testDatasetName}} &lt;- {{%DATASET%}}[-trainIndex,]&#xA;&#xA;predictions&lt;-knn(train = {{trainDatasetName}}[,{{independentvars}}], test={{testDatasetName}}[,{{independentvars}}],cl={{trainDatasetName}}[,c('{{dependentvar}}')],k=noneighbors)&#xA;&#xA;confusionMatrixResults &lt;-with({{testDatasetName}} ,confusionMatrix(predictions,{{dependentvar}}))&#xA;BSkyFormat(confusionMatrixResults$table, singleTableOutputHeader=&quot;Confusion Matrix&quot;)&#xA;&#xA;#Display accuracy and kappa statistics values&#xA;&#xA;accuracyKappaStats &lt;-as.matrix(confusionMatrixResults$overall)&#xA;colnames(accuracyKappaStats) &lt;- c(&quot;Values&quot;)&#xA;BSkyFormat(as.matrix(accuracyKappaStats),singleTableOutputHeader=&quot;Accuracy and Kappa Statistics&quot;)&#xA;&#xA;#the sensitivity, specificity, positive predictive value, negative predictive value, precision, recall, F1, prevalence, detection rate, detection prevalence and balanced accuracy for each class. For two class systems, this is calculated once using the positive argument&#xA;additionalStats&lt;-as.matrix(confusionMatrixResults$byClass)&#xA;colnames(additionalStats) &lt;- c(&quot;Values&quot;)&#xA;BSkyFormat(as.matrix(additionalStats),singleTableOutputHeader=&quot;Additional Statistics&quot;)&#xA;&#xA;#Saving predicted values&#xA;eval(parse(text =paste( &quot;{{testDatasetName}}&quot;, &quot;$&quot;,&quot;{{predictedValues}}&quot;,&quot;{{dependentvar}}&quot;,&quot;&lt;&lt;-&quot;,&quot;predictions&quot;, sep='')))&#xA;}&#xA;)&#xA;BSkyLoadRefreshDataframe({{trainDatasetName}})&#xA;BSkyLoadRefreshDataframe({{testDatasetName}})&#xA;&#xA;&#xA;" dlgsyntax="local(&#xA;{&#xA;noneighbors = c('{{noneighbors}}')&#xA;if (noneighbors=='')&#xA;{&#xA;noneighbors =sqrt(nrow({{%DATASET%}}))&#xA;}&#xA;else&#xA;{&#xA;noneighbors =as.numeric(noneighbors )&#xA;}&#xA;percentage = {{splitPercentage}}/100&#xA;set.seed({{Seed}})&#xA;trainIndex &lt;- createDataPartition({{$dependentvar}},p=percentage,list=FALSE)&#xA;.GlobalEnv${{trainDatasetName}} &lt;- {{%DATASET%}} [ trainIndex,]&#xA;.GlobalEnv${{testDatasetName}} &lt;- {{%DATASET%}}[-trainIndex,]&#xA;&#xA;predictions&lt;-knn(train = {{trainDatasetName}}[,{{independentvars}}], test={{testDatasetName}}[,{{independentvars}}],cl={{trainDatasetName}}[,c('{{dependentvar}}')],k=noneighbors)&#xA;&#xA;confusionMatrixResults &lt;-with({{testDatasetName}} ,confusionMatrix(predictions,{{dependentvar}}))&#xA;BSkyFormat(confusionMatrixResults$table, singleTableOutputHeader=&quot;Confusion Matrix&quot;)&#xA;&#xA;#Display accuracy and kappa statistics values&#xA;&#xA;accuracyKappaStats &lt;-as.matrix(confusionMatrixResults$overall)&#xA;colnames(accuracyKappaStats) &lt;- c(&quot;Values&quot;)&#xA;BSkyFormat(as.matrix(accuracyKappaStats),singleTableOutputHeader=&quot;Accuracy and Kappa Statistics&quot;)&#xA;&#xA;#the sensitivity, specificity, positive predictive value, negative predictive value, precision, recall, F1, prevalence, detection rate, detection prevalence and balanced accuracy for each class. For two class systems, this is calculated once using the positive argument&#xA;additionalStats&lt;-as.matrix(confusionMatrixResults$byClass)&#xA;colnames(additionalStats) &lt;- c(&quot;Values&quot;)&#xA;BSkyFormat(as.matrix(additionalStats),singleTableOutputHeader=&quot;Additional Statistics&quot;)&#xA;&#xA;#Saving predicted values&#xA;eval(parse(text =paste( &quot;{{testDatasetName}}&quot;, &quot;$&quot;,&quot;{{predictedValues}}&quot;,&quot;{{dependentvar}}&quot;,&quot;&lt;&lt;-&quot;,&quot;predictions&quot;, sep='')))&#xA;}&#xA;)&#xA;BSkyLoadRefreshDataframe({{trainDatasetName}})&#xA;BSkyLoadRefreshDataframe({{testDatasetName}})&#xA;&#xA;&#xA;" Helpfile="{assembly:Null}" splitProcessing="False" MenuLocation="{assembly:Null}" OutputDefinition="" Width="575" Command="False" Height="485" HelpText="&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;.c0 { color: Black } .c1 { margin: 0px 0px 10px } .c2 { font-weight: bold; font-size: 14.6666660308838px; line-height: 1.14999997615814; font-family: 'Arial' } .c3 { margin: 0px 0px 12px; font-size: 16.5px; font-weight: bold } .c4 { margin: 0px 0px 12px; font-size: 16.5px } .c5 { margin: 0px 0px 13px; line-height: 1.14999997615814; font-size: 11px; font-family: 'Arial' } .c6 { font-weight: bold; font-size: 14.6666660308838px; font-family: 'Arial' } .c7 { margin: 0px 0px 10px; line-height: 1.14999997615814; font-size: 11px; font-family: 'Arial' } .c8 { font-family: 'Courier New'; font-size: 16px } .c9 { margin: 0px 0px 11px; font-size: 12.87px; font-weight: bold } .c10 { font-size: 18.87px } .c11 { vertical-align: middle } .c12 { vertical-align: top } .c13 { font-family: 'Courier New'; font-size: 17px } .c14 { margin: 0px 0px 12px } .c15 { font-size: 17px } .c16 { font-weight: normal; font-size: 14.6666660308838px; font-family: 'Arial' } &lt;/style&gt;&lt;/head&gt;&lt;body class=&quot;c0&quot;&gt;&lt;p class=&quot;c1&quot;&gt;&lt;span&gt;&lt;span class=&quot;c2&quot;&gt;Description:&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span&gt;&lt;span class=&quot;c3&quot;&gt;k-Nearest Neighbor Classification&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span class=&quot;c3&quot;&gt;&amp;#x200b;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span class=&quot;c4&quot;&gt;Note:&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span class=&quot;c4&quot;&gt;1. Training and testing datasets are automatically created with KNN based on the split percentage specified&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span class=&quot;c4&quot;&gt;2. The predicted values are stored in the testing dataset and are used to compute model statistics namely accuracy, kappa, sensitivity.... The confusion matrix is also displayed&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span class=&quot;c4&quot;&gt;&amp;#x200b;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p class=&quot;c5&quot;&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;&amp;#x200b;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c7&quot;&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;Usage:&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span&gt;&lt;span class=&quot;c8&quot;&gt;knn(train, test, cl, k = 1, l = 0, prob = FALSE, use.all = TRUE)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p class=&quot;c5&quot;&gt;&lt;span&gt;&lt;span class=&quot;c6&quot;&gt;&amp;#x200b;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;c9&quot;&gt;&lt;span&gt;&lt;span class=&quot;c10&quot;&gt;Arguments&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;table&gt;&lt;col/&gt;&lt;col/&gt;&lt;tbody class=&quot;c11&quot;&gt;&lt;tr class=&quot;c12&quot;&gt;&lt;td class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;train&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;c12&quot;&gt;&lt;p class=&quot;c14&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;matrix or data frame of training set cases.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;c12&quot;&gt;&lt;td class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;c12&quot;&gt;&lt;p class=&quot;c14&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;matrix or data frame of test set cases. A vector will be interpreted as a row vector for a single case.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;c12&quot;&gt;&lt;td class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;cl&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;c12&quot;&gt;&lt;p class=&quot;c14&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;factor of true classifications of training set&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;c12&quot;&gt;&lt;td class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;c12&quot;&gt;&lt;p class=&quot;c14&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;number of neighbors considered.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;c12&quot;&gt;&lt;td class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;l&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;c12&quot;&gt;&lt;p class=&quot;c14&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;minimum vote for definite decision, otherwise&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;doubt&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;. (More precisely, less than&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;k-l&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;&amp;#160;dissenting votes are allowed, even if&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;&amp;#160;is increased by ties.)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;c12&quot;&gt;&lt;td class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;prob&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;c12&quot;&gt;&lt;p class=&quot;c14&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;If this is true, the proportion of the votes for the winning class are returned as attribute&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;prob&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;c12&quot;&gt;&lt;td class=&quot;c12&quot;&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;use.all&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td class=&quot;c12&quot;&gt;&lt;p class=&quot;c14&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;controls handling of ties. If true, all distances equal to the&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;th largest are included. If false, a random selection of distances equal to the&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;th is chosen to use exactly&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;&amp;#160;neighbors.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div class=&quot;c9&quot;&gt;&lt;span&gt;&lt;span class=&quot;c10&quot;&gt;Value&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p class=&quot;c1&quot;&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;Factor of classifications of test set.&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;doubt&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;&amp;#160;will be returned as&amp;#160;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c13&quot;&gt;NA&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&quot;c15&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;c5&quot;&gt;&lt;span&gt;&lt;span class=&quot;c16&quot;&gt;&amp;#x200b;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;" RHelpText="help(knn)" Background="#FFFFFFFF" xmlns="clr-namespace:BSky.Controls;assembly=BSky.Controls" xmlns:assembly="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"><BSkySourceList CanExecute="True" Syntax="%%VALUE%%" summaryCtrl="False" PrefixTxt="{assembly:Null}" SepCharacter="{assembly:Null}" maxNoOfVariables="" SubstituteSettings="NoPrefix|UseComma" ordlevels="" nomlevels="" Name="src" AutoVar="False" renderVars="False" Filter="String|Numeric|Date|Logical|Ordinal|Nominal|Scale" Width="260" Height="240" Left="5.33333333333334" Top="30" Enabled="True" OverwriteSettings="{assembly:Null}" MoveVariables="True" SelectionMode="Extended"  AllowDrop="True" IsEnabled="True" Focusable="True" av:Canvas.Left="5.33333333333334" av:Canvas.Top="30" av:Grid.IsSharedSizeScope="True"><BSkySourceList.SelectionChangeBehaviour><BehaviourCollection Capacity="0" /></BSkySourceList.SelectionChangeBehaviour><BSkySourceList.Template><av:ControlTemplate TargetType="av:ListBox"><av:Border BorderThickness="1,1,1,1" CornerRadius="4,4,4,4" BorderBrush="#FF888888" Background="#FFFFFFFF"><av:ScrollViewer Margin="1,1,1,1" Focusable="False"><av:StackPanel IsItemsHost="True" Margin="0,0,0,0" /></av:ScrollViewer></av:Border></av:ControlTemplate></BSkySourceList.Template><BSkySourceList.Style><av:Style TargetType="av:ListBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkySourceList.Style></BSkySourceList><BSkyTargetList CanExecute="False" Syntax="%%VALUE%%" summaryCtrl="False" PrefixTxt="" SepCharacter="" maxNoOfVariables="" SubstituteSettings="NoPrefix|UseComma|Enclosed|CreateArray" ordlevels="" nomlevels="" Name="independentvars" AutoVar="True" renderVars="False" Filter="Numeric|Scale" Width="260" Height="186" Left="310" Top="85" Enabled="True" OverwriteSettings="{assembly:Null}" MoveVariables="True" SelectionMode="Extended"  AllowDrop="True" IsEnabled="True" Focusable="True" av:Canvas.Left="310" av:Canvas.Top="85" av:Grid.IsSharedSizeScope="True"><BSkyTargetList.SelectionChangeBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="ItemsCount" Value="0" Operator="GreaterThan" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="independentvars" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="ItemsCount" Value="0" Operator="Equals" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="independentvars" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTargetList.SelectionChangeBehaviour><BSkyTargetList.Template><av:ControlTemplate TargetType="av:ListBox"><av:Border BorderThickness="1,1,1,1" CornerRadius="4,4,4,4" BorderBrush="#FF888888" Background="#FFFFFFFF"><av:ScrollViewer Margin="1,1,1,1" Focusable="False"><av:StackPanel IsItemsHost="True" Margin="0,0,0,0" /></av:ScrollViewer></av:Border></av:ControlTemplate></BSkyTargetList.Template><BSkyTargetList.Style><av:Style TargetType="av:ListBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTargetList.Style></BSkyTargetList><BSkyGroupingVariable Name="dependentvar" Width="260" Height="30" Left="310" Top="30" Filter="String|Numeric|Logical|Ordinal|Nominal" CanExecute="False" SubstituteSettings="NoPrefix|UseComma" Enabled="True" PrefixTxt="" SepCharacter="" nomlevels="" ordlevels="" Syntax="%%VALUE%%" IsEnabled="True" av:Canvas.Left="310" av:Canvas.Top="30"><BSkyGroupingVariable.SelectionChangeBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="ItemsCount" Value="1" Operator="Equals" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="dependentvar" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="ItemsCount" Value="0" Operator="Equals" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="dependentvar" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyGroupingVariable.SelectionChangeBehaviour><SingleItemList CanExecute="False" summaryCtrl="False" PrefixTxt="" SepCharacter="" maxNoOfVariables="" SubstituteSettings="NoPrefix|UseComma" ordlevels="" nomlevels="" AutoVar="True" renderVars="False" Filter="String|Numeric|Logical|Ordinal|Nominal" Left="NaN" Top="NaN" Enabled="True" OverwriteSettings="{assembly:Null}" MoveVariables="True" SelectionMode="Extended"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" AllowDrop="True" Focusable="True" av:Grid.IsSharedSizeScope="True"><SingleItemList.SelectionChangeBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="ItemsCount" Value="1" Operator="Equals" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="dependentvar" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="ItemsCount" Value="0" Operator="Equals" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="dependentvar" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></SingleItemList.SelectionChangeBehaviour><SingleItemList.Template><av:ControlTemplate TargetType="av:ListBox"><av:Border BorderThickness="1,1,1,1" CornerRadius="4,4,4,4" BorderBrush="#FF888888" Background="#FFFFFFFF"><av:ScrollViewer Margin="1,1,1,1" Focusable="False"><av:StackPanel IsItemsHost="True" Margin="0,0,0,0" /></av:ScrollViewer></av:Border></av:ControlTemplate></SingleItemList.Template><SingleItemList.Style><av:Style TargetType="av:ListBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></SingleItemList.Style></SingleItemList></BSkyGroupingVariable><BSkyLabel Name="srclbl" Text="Source Variables:" Width="140" Height="25" Left="0.999999999999993" Top="4.33333333333336" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="0.999999999999993" av:Canvas.Top="4.33333333333336">Source Variables:</BSkyLabel><BSkyLabel Name="lbl2" Text="Dependent Variable (one):" Width="151" Height="27" Left="305" Top="3.33333333333298" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="305" av:Canvas.Top="3.33333333333298">Dependent Variable (one):</BSkyLabel><BSkyLabel Name="lbl3" Text="Independent Variables (one or more):" Width="213.333333333333" Height="25.6666666666667" Left="305" Top="60" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="305" av:Canvas.Top="60">Independent Variables (one or more):</BSkyLabel><BSkyLabel Name="lbl5" Text="No. of neighbors:" Width="113.333333333333" Height="27.6666666666667" Left="8.00000000000006" Top="368" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="8.00000000000006" av:Canvas.Top="368">No. of neighbors:</BSkyLabel><BSkyTextBox PrefixTxt="{assembly:Null}" OverWriteExistingVariables="False" OverwriteSettings="DontPrompt" Name="noneighbors" Width="48.6666666666667" Height="30" Left="124" Top="367.666666666666" SubstituteSettings="TextAsIs" CanExecute="True" Enabled="True" Syntax="%%VALUE%%" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Center" Template="{av:DynamicResource TextBoxBaseControlTemplate}" AllowDrop="True" IsEnabled="True" av:Canvas.Left="124" av:Canvas.Top="367.666666666666" xml:space="preserve"><BSkyTextBox.TextChangedBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="NotNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="noneighbors" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="IsNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="noneighbors" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTextBox.TextChangedBehaviour><BSkyTextBox.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTextBox.Style></BSkyTextBox><BSkyVariableMoveButton Name="mov1" InputList="src" TargetList="dependentvar" Width="30" Height="30" Left="270" Top="30" Padding="1,1,1,1" Tag="To Dest" Margin="2,2,2,2" av:Canvas.Left="270" av:Canvas.Top="30"><BSkyVariableMoveButton.Effect><av:DropShadowEffect ShadowDepth="0" Color="#C89B5F00" Direction="320" Opacity="1" /></BSkyVariableMoveButton.Effect><av:Grid><av:Image Source="pack://application:,,,/BSky.Controls;component/Resources/left.png" /></av:Grid></BSkyVariableMoveButton><BSkyVariableMoveButton Name="mov2" InputList="src" TargetList="independentvars" Width="30" Height="30" Left="270" Top="81.9999999999997" Padding="1,1,1,1" Tag="To Dest" Margin="2,2,2,2" av:Canvas.Left="270" av:Canvas.Top="81.9999999999997"><BSkyVariableMoveButton.Effect><av:DropShadowEffect ShadowDepth="0" Color="#C89B5F00" Direction="320" Opacity="1" /></BSkyVariableMoveButton.Effect><av:Grid><av:Image Source="pack://application:,,,/BSky.Controls;component/Resources/left.png" /></av:Grid></BSkyVariableMoveButton><BSkyLabel Name="modlbl" Text="Enter split percentage:" Width="132.666666666667" Height="27.6666666666667" Left="225" Top="305.666666666666" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="225" av:Canvas.Top="305.666666666666">Enter split percentage:</BSkyLabel><BSkyTextBox PrefixTxt="{assembly:Null}" OverWriteExistingVariables="False" OverwriteSettings="DontPrompt" Name="splitPercentage" Width="28.6666666666669" Height="30" Left="450" Top="302.666666666667" SubstituteSettings="TextAsIs" CanExecute="True" Enabled="True" Syntax="%%VALUE%%" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Center" Template="{av:DynamicResource TextBoxBaseControlTemplate}" AllowDrop="True" IsEnabled="True" av:Canvas.Left="450" av:Canvas.Top="302.666666666667"><BSkyTextBox.TextChangedBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="IsNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="splitPercentage" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="NotNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="splitPercentage" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTextBox.TextChangedBehaviour><BSkyTextBox.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTextBox.Style>80</BSkyTextBox><BSkyLabel Name="lab33" Text="%" Width="20.6666666666666" Height="27.6666666666666" Left="476" Top="303.333333333334" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="476" av:Canvas.Top="303.333333333334">%</BSkyLabel><BSkyLabel Name="lab60" Text="Set Seed:" Width="63.3333333333333" Height="26.3333333333333" Left="6.66666666666674" Top="299.666666666667" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="6.66666666666674" av:Canvas.Top="299.666666666667">Set Seed:</BSkyLabel><BSkyTextBox PrefixTxt="" OverWriteExistingVariables="False" OverwriteSettings="DontPrompt" Name="Seed" Width="80" Height="30" Left="73.9999999999999" Top="300" SubstituteSettings="TextAsIs" CanExecute="True" Enabled="True" Syntax="%%VALUE%%" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Center" Template="{av:DynamicResource TextBoxBaseControlTemplate}" AllowDrop="True" IsEnabled="True" av:Canvas.Left="73.9999999999999" av:Canvas.Top="300"><BSkyTextBox.TextChangedBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="IsNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="Seed" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="NotNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="Seed" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTextBox.TextChangedBehaviour><BSkyTextBox.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTextBox.Style>123</BSkyTextBox><BSkyGroupBox Name="Group1" HeaderText="Train and test datasets" Text="{assembly:Null}" Width="350" Height="196.333333333333" Left="221.333333333334" Top="283.333333333333" Header="Train and test datasets" Content="{assembly:Null}" BorderBrush="#FFA9A9A9" IsHitTestVisible="True" av:Canvas.Left="221.333333333334" av:Canvas.Top="283.333333333333" /><BSkyGroupBox Name="Group2" HeaderText="Tuning parameters for KNN" Text="{assembly:Null}" Width="203.333333333333" Height="132" Left="3.33333333333343" Top="348" Header="Tuning parameters for KNN" Content="{assembly:Null}" BorderBrush="#FFA9A9A9" IsHitTestVisible="True" av:Canvas.Left="3.33333333333343" av:Canvas.Top="348" /><BSkyTextBox PrefixTxt="{assembly:Null}" OverWriteExistingVariables="False" OverwriteSettings="DontPrompt" Name="predictedValues" Width="100" Height="30" Left="450" Top="412.666666666666" SubstituteSettings="TextAsIs" CanExecute="False" Enabled="True" Syntax="%%VALUE%%" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Center" Template="{av:DynamicResource TextBoxBaseControlTemplate}" AllowDrop="True" IsEnabled="True" av:Canvas.Left="450" av:Canvas.Top="412.666666666666" xml:space="preserve"><BSkyTextBox.TextChangedBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="IsNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="predictedValues" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="ValidString" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="predictedValues" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="isNullOrEmpty" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="predictedValues" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTextBox.TextChangedBehaviour><BSkyTextBox.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTextBox.Style></BSkyTextBox><BSkyLabel Name="lab45" Text="Enter variable prefix for predicted values:" Width="226" Height="29" Left="225" Top="414" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="225" av:Canvas.Top="414">Enter variable prefix for predicted values:</BSkyLabel><BSkyTextBox PrefixTxt="{assembly:Null}" OverWriteExistingVariables="False" OverwriteSettings="PromptBeforeOverwritingDatasets" Name="trainDatasetName" Width="100" Height="30" Left="450" Top="337.666666666667" SubstituteSettings="TextAsIs" CanExecute="True" Enabled="True" Syntax="%%VALUE%%" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Center" Template="{av:DynamicResource TextBoxBaseControlTemplate}" AllowDrop="True" IsEnabled="True" av:Canvas.Left="450" av:Canvas.Top="337.666666666667"><BSkyTextBox.TextChangedBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="isNullOrEmpty" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="trainDatasetName" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="ValidString" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="trainDatasetName" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="IsNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="trainDatasetName" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTextBox.TextChangedBehaviour><BSkyTextBox.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTextBox.Style>trainData</BSkyTextBox><BSkyLabel Name="txt32" Text="Enter name for the training dataset:" Width="203.666666666667" Height="26.6666666666667" Left="225" Top="338" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="225" av:Canvas.Top="338">Enter name for the training dataset:</BSkyLabel><BSkyLabel Name="lab22" Text="Enter name for the testing dataset:" Width="202.666666666667" Height="29" Left="225" Top="373" CanExecute="False" FontFamily="Segoe UI" FontSize="12" av:Canvas.Left="225" av:Canvas.Top="373">Enter name for the testing dataset:</BSkyLabel><BSkyTextBox PrefixTxt="{assembly:Null}" OverWriteExistingVariables="False" OverwriteSettings="PromptBeforeOverwritingDatasets" Name="testDatasetName" Width="100" Height="30" Left="450" Top="374.666666666667" SubstituteSettings="TextAsIs" CanExecute="True" Enabled="True" Syntax="%%VALUE%%" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Center" Template="{av:DynamicResource TextBoxBaseControlTemplate}" AllowDrop="True" IsEnabled="True" av:Canvas.Left="450" av:Canvas.Top="374.666666666667"><BSkyTextBox.TextChangedBehaviour><BehaviourCollection Capacity="4"><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="isNullOrEmpty" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="testDatasetName" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="ValidString" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="testDatasetName" PropertyName="CanExecute" Value="True" /></PropertySettersCollection></Behaviour.Setters></Behaviour><Behaviour><Behaviour.Condition><Condition PropertyName="Text" Value="{assembly:Null}" Operator="IsNumeric" /></Behaviour.Condition><Behaviour.Setters><PropertySettersCollection Capacity="4"><PropertySetter ControlName="testDatasetName" PropertyName="CanExecute" Value="False" /></PropertySettersCollection></Behaviour.Setters></Behaviour></BehaviourCollection></BSkyTextBox.TextChangedBehaviour><BSkyTextBox.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyTextBox.Style>testData</BSkyTextBox><BSkyMultiLineLabel Name="lab543" Width="186" Height="66" Left="13" Top="401" CanExecute="True" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Top" Template="{av:DynamicResource TextBoxControlTemplateMultiline}" av:Canvas.Left="13" av:Canvas.Top="401"><BSkyMultiLineLabel.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyMultiLineLabel.Style>(When a value is not specified, default is set to the square root of the number of observations in dataset)</BSkyMultiLineLabel><BSkyMultiLineLabel Name="lab77" Width="194" Height="25" Left="228" Top="435" CanExecute="True" TextWrapping="Wrap" AcceptsTab="True" VerticalScrollBarVisibility="Auto" FontFamily="Segoe UI" FontSize="12" VerticalContentAlignment="Top" Template="{av:DynamicResource TextBoxControlTemplateMultiline}" av:Canvas.Left="228" av:Canvas.Top="435"><BSkyMultiLineLabel.Style><av:Style TargetType="av:TextBox"><av:Style.Resources><av:ResourceDictionary /></av:Style.Resources><av:Setter Property="av:UIElement.Effect"><av:Setter.Value><av:DropShadowEffect Color="#FFF5F5DC" /></av:Setter.Value></av:Setter></av:Style></BSkyMultiLineLabel.Style>(You must specify a prefix)</BSkyMultiLineLabel></BSkyCanvas>